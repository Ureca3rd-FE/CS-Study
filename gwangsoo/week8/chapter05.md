# Redis

Redis는 **인메모리 기반의 오픈소스 Key-Value 데이터 저장소**로 데이터를 RAM에 저장하기 때문에 매우 빠른 성능을 제공한다.  
캐싱, 실시간 채팅, 세션 공유 등 빠른 응답 속도가 필요한 서비스에서 널리 사용된다.

## 왜 빠른가?

일반적인 데이터베이스는 하드디스크나 SSD에 데이터를 저장하지만 Redis는 **메모리에 데이터를 저장**하므로 디스크 I/O 없이 즉시 접근할 수 있어 속도가 매우 빠르다.

## “RAM은 휘발성인데, 데이터는 안 날아가나요?”

맞다. RAM은 전원이 꺼지면 데이터가 사라진다.  
이를 해결하기 위해 Redis는 **영속성(Persistence)** 기능을 제공한다.

### Redis의 백업 방식

1. **Snapshot**

   - 특정 시점의 데이터를 스냅샷으로 떠서 디스크에 저장
   - 빠르고 용량이 작지만 스냅샷 이후 변경분은 날아갈 수 있음

2. **AOF (Append Only File)**
   - Redis에 실행되는 **모든 명령을 로그로 기록**
   - 서버 재시작 시 해당 명령들을 재실행해 데이터를 복구
   - 더 안전하지만 파일 크기가 커질 수 있음

## 데이터 타입 (Key-Value 기반)

Redis의 값은 단순 문자열뿐 아니라 다양한 데이터 구조를 지원한다.

1. **String**

   - 텍스트 또는 바이너리 저장
   - 최대 512MB

2. **Set**

   - 중복 없는 문자열 집합

3. **Sorted Set**

   - Set + Score 기반 정렬 기능

4. **Hash**

   - Key 안에 여러 필드를 담는 구조 (JSON 비슷하게 사용 가능)

5. **List**
   - 양방향 연결 리스트 구조 지원
   - 큐/스택처럼 활용 가능

## 사용 예제

### 1. **캐싱**

서버 응답 속도를 높이기 위해 DB 조회 결과를 Redis에 캐시한다.

- 상품 상세 정보
- 인기 게시물 목록
- 자주 조회되는 검색 결과

DB 대신 Redis에서 즉시 읽어와 **대기 시간을 크게 단축**할 수 있다.

### 2. **세션 저장 / 로그인 유지**

웹 서버가 여러 대일 때 로그인 세션을 Redis에 저장하면 서버마다 세션을 공유할 수 있다.

- 로그인 상태 유지
- OAuth 인증 토큰 저장

### 3. **실시간 랭킹**

Sorted Set을 사용하면 점수 기반 실시간 순위 계산이 매우 빠르다.

- 게임 점수 랭킹
- 인기 검색어 순위
- 실시간 좋아요/조회수 기반 순위

### 4. **실시간 채팅**

Redis Pub/Sub 기능을 사용해 채팅 메시지 전달을 빠르게 처리할 수 있다.

- 단체 채팅방
- 알림(push) 시스템
- 실시간 방송 댓글
