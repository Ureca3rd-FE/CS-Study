# 로드 밸런싱(Load Balancing)

## 로드 밸런싱이란?

- 둘 이상의 서버(CPU, 저장장치 등 시스템 자원)에 **작업(트래픽)을 분산**하여 처리하는 기술
- 사용자가 급격히 증가한 현대 웹 환경에서 **1대의 서버로는 모든 요청을 처리하기 어렵기 때문**에 필수적으로 사용됨
- 서버가 여러 대일 때 효율적으로 요청을 분배하여 **부하 방지, 가용성 확보, 무중단 서비스**를 가능하게 한다.

## 왜 로드 밸런싱이 필요한가?

### Scale-up vs Scale-out

| 방식                     | 설명                                         | 단점                                                |
| ------------------------ | -------------------------------------------- | --------------------------------------------------- |
| **Scale-up(수직 확장)**  | 서버 1대의 성능(CPU, RAM)을 높여 처리량 향상 | 비용 매우 높음, 한계 존재, 장애 시 전체 서비스 다운 |
| **Scale-out(수평 확장)** | 여러 대의 서버가 동일한 역할을 나눠 처리     | 로드 밸런서 필요, 구조가 약간 복잡해짐              |

현대 웹 서비스는 대부분 Scale-out + 로드 밸런서 조합 사용

## 로드 밸런서의 역할

- 클라이언트와 서버 사이에서 **트래픽을 균등하게 분배**
- 특정 서버의 과부하를 방지
- 서버 장애 시 자동으로 정상 서버로 트래픽 우회(Failover)
- 웹 서버 수가 늘어나도 안정적으로 관리 가능

## 로드 밸런서의 서버 선택 방식

### 1. 라운드 로빈 (Round Robin)

- 요청을 서버 목록 순서대로 **차례대로 분배**
- 서버 성능이 비슷할 때 효과적

### 2. Least Connections (최소 연결 방식)

- **현재 연결 수가 가장 적은 서버**로 요청 전달
- 트래픽의 처리 시간이 길거나 불규칙할 때 유리

### 3. Source

- **사용자 IP를 해싱하여 서버를 선택**
- 같은 사용자는 **항상 동일 서버로** 연결됨

## 로드 밸런서 장애 대비

로드 밸런서도 하나의 장비이므로 장애가 발생할 수 있다.  
따라서 일반적으로 **두 대 이상을 이중화 구성**하여 안정성을 확보한다.

### Active / Passive 구조

- **Active**: 실제로 트래픽을 분산하는 역할
- **Passive**: 대기 상태로 있다가 Active가 장애 시 자동 승계(Failover)
- 장애 시 서비스 중단 없이 자연스럽게 역할이 전환되어 안정성 보장

## 종류

로드 밸런싱은 소프트웨어 방식, 하드웨어 방식, 클라우드 방식 등 다양한 형태로 제공된다.  
아래는 대표적인 로드 밸런서 종류의 특징이다.

### Nginx

- 가장 널리 사용되는 **오픈소스 소프트웨어 기반 로드 밸런서**
- 웹 서버, 리버스 프록시, 캐시 서버 역할도 함께 수행 가능
- 설정이 유연하고 가벼워 **고성능, 고확장성** 환경에서 많이 사용됨
- 자체적인 로드 밸런싱 알고리즘 지원
- 서버 인스턴스 내부에서 또는 독립 서버로 쉽게 구성 가능
- 비용이 거의 없으며 DevOps 환경에서 많이 활용됨

### ELB (AWS Elastic Load Balancer)

- AWS에서 제공하는 **완전 관리형 로드 밸런서**
- 서버 관리 없이 자동으로 트래픽 분산 기능 제공
- 인프라 확장과 장애 대응을 자동화해 운영 비용 절감 가능
