# 페이지 교체 알고리즘

## 1. 개요

가상 메모리는 필요한 페이지만 메모리에 적재하고 사용하지 않는 부분은 보조기억장치에 둔다.  
하지만 메모리가 가득 차면 새 페이지를 올리기 위해 기존 페이지 중 하나를 내보내야 한다.  
이때 내보내는 페이지를 **victim page**라고 한다.

페이지 교체 알고리즘은 어떤 페이지를 내보낼지 결정하는 방법이다.  
기왕이면 수정되지 않은 페이지를 내보내는 것이 유리하다.  
(수정된 페이지는 디스크에 다시 저장해야 하므로 시간이 오래 걸림)

## Page Reference String

CPU는 논리 주소를 사용해 메모리를 접근한다.

메모리에 이미 존재하는 페이지는 페이지 결함이 발생하지 않는다.  
CPU가 요구하는 페이지의 순서를 간단히 표현한 것이 **Page Reference String**이다.

## FIFO 알고리즘

먼저 들어온 페이지를 먼저 내보내는 방식이다.  
가장 단순하고 구현이 쉽다.

메모리에 먼저 올라온 페이지가 가장 오래 있었으므로 그 페이지를 희생 페이지로 선택한다.

단점으로는 오래된 페이지가 여전히 자주 사용될 수도 있다는 점이다.  
이 때문에 메모리 프레임 수가 늘어나도 오히려 페이지 결함이 더 생기는 **비정상 현상**이 발생할 수 있다.

**초기화 코드**처럼 한 번만 사용되는 부분에는 적합하다.

## OPT 알고리즘

앞으로 가장 오랫동안 사용되지 않을 페이지를 교체하는 방식이다.  
페이지 결함을 최소화할 수 있는 이상적인 방법이다.

하지만 앞으로의 접근 순서를 실제로는 알 수 없기 때문에  
이론적인 알고리즘으로만 사용된다.

## LRU 알고리즘

가장 오래 사용하지 않은 페이지를 교체하는 방식이다.  
최근에 사용하지 않았다면 앞으로도 사용하지 않을 가능성이 높다는 점에 착안했다.

OPT는 미래를 예측하지만 LRU는 과거의 사용 이력을 바탕으로 판단하기 때문에 실제로 구현이 가능하다.  
현실적인 방법 중 가장 효과적인 알고리즘이다.

## 교체 방식

### Global 교체

모든 프로세스의 페이지 중 하나를 교체 대상으로 삼는 방식이다.  
전체 메모리를 기준으로 판단하기 때문에 효율적이다.

### Local 교체

각 프로세스에 할당된 페이지 안에서만 교체하는 방식이다.  
프로세스 간 간섭이 없지만 전체적으로는 비효율적이다.

대부분의 시스템은 전체 교체 방식을 사용한다.
