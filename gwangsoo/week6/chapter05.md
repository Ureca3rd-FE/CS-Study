# 파일 시스템(File System)

파일 시스템은 **컴퓨터에서 파일이나 데이터를 체계적으로 저장, 관리하는 방법**이다.  
하드디스크나 SSD와 같은 저장 매체에는 수많은 파일이 존재하기 때문에 이를 **쉽게 찾고, 수정하고, 삭제할 수 있도록 관리하는 체계**가 필요하다.  
이 역할을 수행하는 것이 바로 파일 시스템이다.

특징은 아래와 같다.

- **커널 영역에서 동작**한다.
- 파일의 **생성(Create), 읽기(Read), 수정(Update), 삭제(Delete)** 기능을 지원한다.
- **계층적 디렉터리 구조**를 가진다.
- **디스크 파티션마다 하나의 파일 시스템**을 둘 수 있다.

## 역할

- **파일 관리**: 파일의 생성, 삭제, 이름 변경, 접근 권한 관리
- **보조 저장소 관리**: 디스크 공간 할당, 비어있는 공간 관리
- **파일 무결성 보장**: 데이터 손상 방지, 복구 기능 제공
- **접근 방법 제공**: 사용자가 데이터를 효율적으로 접근하도록 지원

## 개발 목적

- **하드디스크와 메인 메모리 간 속도 차이를 줄이기 위함**
- **파일의 효율적인 관리**
- **디스크 용량의 최적 활용**

## 구조

파일 시스템은 크게 두 부분으로 나뉜다.

- **메타 영역(Metadata Area)**  
  파일 이름, 위치, 크기, 생성 및 수정 시간, 삭제 여부 등  
  파일 자체에 대한 정보를 저장하는 영역

- **데이터 영역(Data Area)**  
  파일의 실제 데이터가 저장되는 영역

## 접근 방법

### 순차 접근 방식

가장 단순한 접근 방법으로, **테이프 모델**을 기반으로 한다.  
대부분의 연산은 `read`, `write`이다.

- 현재 위치를 가리키는 **포인터**가 존재
- 읽기 또는 쓰기 시 포인터를 앞으로 이동
- 되돌아가야 할 경우 지정한 **offset**만큼 되감기 필요
- 예: 텍스트 파일, 로그 파일 등

### 직접 접근 방식

순서에 상관없이 **임의의 위치에서 읽기와 쓰기가 가능한 방식**이다.  
특정 블록으로 바로 접근할 수 있어 효율적이다.

- 현재 위치를 가리키는 **cp 변수**만 유지하면 됨
- **순차 접근 기능도 쉽게 구현 가능**
- **데이터베이스, 대규모 정보 관리**에 활용됨
- 순서 제약이 없으므로 **랜덤 접근** 가능

### (3) 기타 접근 방식

직접 접근 방식을 기반으로 **index**를 구축하여 대용량 파일을 효율적으로 검색한다.  
대규모 파일의 입출력 탐색에 유용하다.

## 7. 디렉터리와 디스크 구조

### 1단계 디렉터리

가장 단순한 구조로 모든 파일이 **하나의 디렉터리 안에 존재**한다.  
모든 파일의 이름은 **전역적으로 유일**해야 하며 **서로 다른 사용자라도 같은 파일명 사용이 불가능**하다.

### 2단계 디렉터리

사용자별로 **개별 디렉터리**를 제공한다.

- **MFD**: 사용자 계정 이름과 번호로 색인되는 상위 디렉터리
- **UFD**: 각 사용자의 개인 디렉터리

이를 통해 서로 다른 사용자가 **같은 이름의 파일**을 가질 수 있다.

### 트리 구조 디렉터리

2단계 디렉터리를 확장한 **계층형 트리 구조**이다.  
하나의 루트 디렉터리 아래에 여러 하위 디렉터리가 존재한다.

- 한 비트를 사용하여 일반 파일(0)인지, 디렉터리 파일(1)인지 구분한다.
- 하위 폴더 생성 및 관리가 용이하며 현재 대부분의 운영체제가 이 방식을 사용한다.

### 그래프 구조 디렉터리

트리 구조를 일반화한 형태로 **링크**를 통해 여러 디렉터리에서 같은 파일을 참조할 수 있다.

- 순환(cycle)이 발생하지 않도록 하위 디렉터리가 아닌 **파일에 대한 링크만 허용**
- **가비지 컬렉션**을 이용해 접근 가능한 파일만 표시하여 관리
- 링크를 통해 **우회 경로**로 접근 가능

그래프 구조는 **공유 파일 시스템**에 유용하게 사용된다.
