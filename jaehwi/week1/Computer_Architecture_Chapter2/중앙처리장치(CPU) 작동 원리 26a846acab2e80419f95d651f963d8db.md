# 중앙처리장치(CPU) 작동 원리

[중앙처리장치(CPU) 작동 원리 | 👨🏻‍💻 Tech Interview](https://gyoogle.dev/blog/computer-science/computer-architecture/%EC%A4%91%EC%95%99%EC%B2%98%EB%A6%AC%EC%9E%A5%EC%B9%98%20%EC%9E%91%EB%8F%99%20%EC%9B%90%EB%A6%AC.html)

**<목차>**

---

# **중앙처리장치(CPU)의 구성**

CPU는 컴퓨터에서 가장 핵심적인 역할을 수행하는 부분

→ 주기억장치에서 프로그램 명령어와 데이터를 읽어와 처리하고 명령어의 수행 순서를 제어 (= 두뇌)

![image.png](assets/image.png)

## **연산 장치**

**ALU(Arithmetic and Logic Unit)**

: 산술연산(덧셈, 뺄셈)과 논리연산(배타적 논리합, 논리곱, 논리합)을 수행하는 장치

연산에 필요한 데이터를 레지스터에서 가져오고, 연산 결과를 다시 레지스터로 전송…

## **제어 장치**

**CU(Control Unit)**

: 명령어를 순서대로 실행할 수 있도록 제어하는 장치

주기억장치에서 프로그램 명령어를 꺼내 해독 (Instruction register 등…)

⬇️⬇️⬇️

결과에 따라 명령어 실행에 필요한 제어 신호를 기억장치, 연산장치, 입출력장치로 전송

- 이렇게 전송된 정보에 따라 다음에 수행할 동작을 결정함

## **레지스터**

**Register**

: CPU 내부에서 처리할 명령어 주소, 코드, 연산에 필요한 데이터, 연산 결과 등을 임시로 저장하는 장치

(고속 기억장치)

레지스터의 종류

- **범용 레지스터** : 연산에 필요한 데이터나 연산 결과를 임시로 저장
- **특수목적 레지스터** : 특별한 용도로 사용하는 레지스터
  - MAR(Memory Address Register)
    : CPU가 데이터를 읽거나 쓰려는 주기억장치 주소를 저장
  - MBR(Memory Buffer Register)
    : 주기억장치로부터 읽어온 데이터나 주기억장치에 저장할 데이터를 저장
  - PC(Program Counter)
    : 다음에 꺼내어 사용할 명령어 주소를 저장
  - IR(Instruction Register)
    : 현재 수행 중인 명령어를 저장 (= 가장 최근에 꺼내어진 명령어 저장)
  - AC(Accumulator)
    : 연산 결과를 자신에게 다시 누적(= 저장) 시키는 레지스터
  - SP(Stack Pointer)
    : 기억장치의 스택에서 데이터가 채워진 가장 최근 위치를 저장

중앙처리장치 (CPU)의 종류에 따라 사용할 수 있는 레지스터의 개수와 크기가 다름

# **특수 목적 레지스터 중 중요한 것들**

- MAR(메모리 주소 레지스터) : 읽기와 쓰기 연산을 수행할 주기억장치 주소 저장
- PC(프로그램 카운터) : 다음에 수행할 명령어 주소 저장
- IR(명령어 레지스터) : 현재 실행 중인 명령어 저장
- MBR(메모리 버퍼 레지스터) : 주기억장치에서 읽어온 데이터 or 저장할 데이터 임시 저장
- AC(누산기) : 연산 결과 임시 저장

# **CPU의 동작 과정**

동작 과정

1. 주기억장치가 입력장치에서 입력받은 데이터 또는 보조기억장치에 저장된 프로그램을 읽어옴
2. CPU는 프로그램을 실행하기 위해 주기억장치에 저장된 프로그램 명령어와 데이터를 읽어와 처리하고, 결과를 다시 주기억장치에 저장
3. 주기억장치는 처리 결과를 보조기억장치에 저장하거나 출력장치로 전송
4. 제어장치는 1~3 과정에서 명령어가 순서대로 실행되도록 각 장치에 제어 신호를 전송

**명렁어 세트(Instruction Set)** : CPU가 실행할 명령어의 집합

> 연산 코드(Operation Code) + 피연산자(Operand)로 이루어짐
>
> 연산 코드 : 실행할 연산
>
> 피연산자 : 필요한 데이터 or 저장 위치

연산 코드 = 연산, 제어, 데이터 전달, 입출력 기능

피연산자 = 주소, 숫자/문자, 논리 데이터 등을 저장

**명령어 사이클 (Instruction Cycle)**

CPU가 주기억장치에서 하나의 명령어를 인출하여 실행하는 일련의 과정

CPU = 프로그램을 실행하기 위해 주기억장치에서 명령어를 순차적으로 인출(fetch)하여 해석(decode)하고 실행(execute)하는 과정을 반복…

크게 **명령어 인출 사이클**과 **명령어 실행 사이클**로 나뉨

→ 여기서 더 작게 인출, 간접, 실행, 인터럽트 사이클로 또 나뉨

## **인출 사이클 (항상 실행)**

: 메모리로부터 명령어를 읽어오는 과정으로, 현재 PC에 있는 주소의 내용을 IR에 가져옴

1. PC에 저장된 주소를 MAR로 전달
2. 저장된 내용을 토대로 주기억장치의 해당 주소에서 명령어 인출
3. 인출한 명령어를 MBR에 저장
4. 다음 명령어를 인출하기 위해 PC 값 증가시킴 (+ 1)
5. 메모리 버퍼 레지스터(MBR)에 저장된 내용을 명령어 레지스터(IR)에 전달

```
T0 : MAR ← PC
T1 : MBR ← M[MAR], PC ← PC+1
T2 : IR ← MBR
```

M = 명령어

## **간접 사이클 (간접 주소 지정 방식이 필요할 때)**

: 인출 사이클을 통해 읽어온 명령어가 간접 주소지정방식인 경우에 사용됨

(실행 사이클 이전에 사용됨!)

## **실행 사이클 (항상 실행)**

: 명령어를 실행할 때 사용됨

1. 피연산자를 MAR로 보내어 기억장치에서 데이터를 가져옴

2. 데이터는 MBR에 저장

3. Op Code에 알맞은 연산을 수행

```
T0 : MAR ← IR(Addr)  // IR 안에 있는 주소 부분(Addr)을 꺼내서 MAR에 넣자
T1 : MBR ← M[MAR]    // 메모리 주소(MAR)에서 값을 읽어서 MBR에 저장
T2 : AC ← AC + MBR   // AC에 MBR을 더하자
```

[연산코드(Opcode)] [주소 필드(Addr)]

PC를 증가할 필요 X

## **인터럽트 사이클 (인터럽트 요구가 있을 때)**

: 실행 사이클이 끝난 후 수행되는 사이클

원래 실행 사이클이 끝나면 처음부터 다시 인출 사이클로 돌아가는데, 인터럽트 신호가 들어온 경우에는 인터럽트 사이클이 수행됨

인터럽트 신호란?

CPU가 하던 일을 잠시 멈추고 다른 중요한 일을 먼저 처리하도록 알려주는 신호 (이벤트 기능)
