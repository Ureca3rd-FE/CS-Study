# 🖲️운영체제 4주차

## Chap05. 시스템 콜 (System Call)

### #1. 시스템 콜 이란?

- 개념
  - 사용자 프로그램이 운영체제 커널의 기능을 요청할 때 사용하는 인터페이스
  - 사용자 모드에서 커널 모드로 전환하여 시스템 자원에 안전하게 접근할 수 있게 해주는 역할
- 특징

  - 사용자 모드와 커널 모드의 경계를 안전하게 유지 (시스템 보안 유지)
  - 사용자 모드에서 커널 모드로 전환되는 과정은 트랩(Trap)에 의해 진행됨.

- 주요 기능

  1. 프로세스 관리 (fork, exec, exit, wait)
  2. 디바이스 관리
  3. 통신 (socket, send, receive)
  4. 정보 유지 (getpid, alarm, sleep)

### #2. fork 시스템 콜 - fork()

- 개념 : 실행중인 프로세스를 복제하여 새로운 자식 프로세스를 생성하는 시스템 콜
- 특징
  1. 부모 프로세스의 메모리, 코드, 데이터, 오픈파일 들을 복사하여 자식 프로세스 생성 (상속 받음.)
     - 달라지는 점 : PID, PPID, CPID, 메모리 관련 정보(메모리 위치 정보 등)
     - 부모와 자식은 독립적으로 실행됨.
  2. 부모와 자식은 별도의 프로세스 구분자(PID)를 가짐.
  3. fork() 함수의 반환값은 부모의 경우 CPID를, 자식의 경우 0을 반환
  4. 장점
     - 프로세스 생성속도 빠름.
     - 추가 작업 없이 자원 상속
     - 시스템을 계층적인 구조로 관리 가능

### #3. wait 시스템 콜 - wait()

- 개념 : 부모 프로세스가 자식 프로세스의 종료를 기다릴 때 사용하는 시스템 콜
- 특징

  - 부모 프로세스는 자식이 종료될 때까지 대기상태로 전환됨.
  - 자식 프로세스가 종료되면 종료상태를 부모가 받아올 수 있음.
    - 종료상태를 받는다는 의미
      - 자식의 종료 정보 확인
      - 시스템 자원 해제
    - 종료상태를 받는 이유
      - 상태 정보(정상 종료 여부를 확인 등)를 확인하여 후속 처리 가능
      - 정상적인 자원 회수로 불필요한 데이터 누적 없이 시스템 운영

- 추가 용어

  - 좀비 프로세스 : 자식 프로세스가 종료되었음에도 부모 프로세스가 자원을 회수 하지 않아 메모리에 잔존되어 있는 프로세스 (계속해서 부모의 wait() 함수를 기다림.)
  - 고아 프로세스 : 부모 프로세스가 먼저 종료되어 돌아갈 곳이 없는 프로세스

### #4. exec 시스템 콜 - exec()

- 개념
  - 현재 프로세스의 메모리 공간을 새로운 프로그램으로 덮어쓰고, 해당 프로세스를 실행하는 시스템 콜
  - 기존 프로세스를 새로운 프로세스로 전환 (구조 재사용)
- 특징
  - 코드 영역, 데이터 영역는 새로운 정보로 채워짐.
  - 스택 영역, 힙 영역은 리셋됨.
  - PID/PPID/CPID/메모리 관련 사항은 유지 (실행 중인 프로그램은 바뀜)
