# ⚙️자료 구조 3주차

## Chap02. 이진탐색트리 (BST - Binary Search Tree)

### #1. 이진탐색트리

- 개념

  - 데이터를 탐색/삽입/삭제를 빠르게 하기위해 고안된 **이진트리** 기반의 자료구조
  - 정렬이나 대량의 반복적인 검색이 필요할때 효과적.
  - 목적 : 이진탐색 + 연결리스트의 장점을 모두 얻는것
    - 이진탐색 : 탐색의 시간복잡도 O(logN), 삽입/삭제 불가능
    - 연결리스트 : 삽입/삭제의 시간복잡도 O(1), 탐색의 시간복잡도 O(N)

- 특징
  - 각 노드는 고유한 값을 가짐 (중복허용 X) -> 검색 목적 자료구조이므로.
  - 중위순회시 데이터를 오름차순으로 정렬가능
    - 왼쪽 자식 및 하위 트리는 부모노드보다 작은 값 가짐.
    - 오른쪽 자식 및 하위트리는 부모노드보다 큰 값 가짐.
    ```
       8
     /   \
     3    10
    / \     \
    1  6     14
      / \   /
      4  7  13
    ```
  - 서브트리도 모두 이진탐색트리
  - 탐색/삽입/삭제의 시간복잡도
    - 평균 시간복잡도 : O(logN) <- 균등 트리인 경우
    - 최악 시간복잡도 : O(N) <- 편향 트리인 경우
      ```
         1
        /
        2
       /
       3
      /
      4
      ```
- 삭제하는 경우

  1. leaf노드 : 해당노드 삭제
  2. 자식이 1개인 노드 : 해당노드 삭제 + 자식노드를 올림
  3. 자식이 2개인 노드 : 해당노드 삭제 + 오른쪽 자식노드에서 가장 작은 값/왼쪽 자식노드에서 가장 큰값 올리기
     ```
          7
        /   \
        3    10
       / \     \
       1  6     14
         /     /
         4     13
     ```

- 사용상황

  - 데이터베이스 인덱싱
  - 정렬
  - 관리할 데이터가 빈번하게 탐색/추가/삭제되는 경우

- 한계
  - 최악의 시간복잡도가 존재함. -> 데이터삭제가 빈번할 경우 성능적으로 불안정할 수 있음. (편향트리로 될 경우)
  - 그 단점을 보완한 것이 AVL트리와 RedBlack 트리
    - 탐색이 빈번한 경우 -> AVL트리
    - 삽입/삭제가 빈번한 경우 -> RedBlack 트리
      - 삽입/삭제 성능이 AVL트리보다 좋음. (재배치 가능성이 상대적으로 적음)
      - AVL트리보다는 덜 균형적.

### #2. AVL 트리 (자가균형 이진탐색트리)

- 개념
  - 균형인수가 최대 1이 되도록 균형을 유지하는것. -> 균형인수가 1을 넘으면 회전연산을 수행
    - 균형인수(Balance Factor) : 왼쪽 서브트리의 높이 - 오른쪽 서브트리의 높이
- 특징

  - 균형인수가 -1, 0, 1 중 하나
  - 트리의 높이 : O(logN) (항상)
  - 탐색/삽입/삭제 연산 시간 복잡도 : O(logN) (항상)
  - 회전 연산 : LL,RR,LR,RL 4가지 유형의 회전을 균형을 회복. 회전연산의 이름은 치우쳐진 상황을 기준으로 지어짐.

    1. LL 회전 (단일 우회전)
       - 노드의 왼쪽서브트리의 왼쪽부분에 새노드가 삽입되어 불균형이 발생한 경우
       - 해당 노드를 기준으로 우회전하여 균형 복구
         1. 루트노드를 좌측노드의 우측노드로 연결
         2. 좌측노드의 우측노드를 루트노드의 좌측노드로 연결
         3. 새로운 부모노드로 승격
         4. 트리높이 재계산
            <img src="./asset/LL회전.png" width="400px" />
    2. RR 회전 (단일 좌회전)

       - 노드의 오른쪽 서브트리의 오른쪽부분에 새노드가 삽입되어 불균형이 발생한 경우
       - 해당 노드를 기준으로 좌회전하여 균형 복구
         1. 루트노드를 우측노드의 좌측노드로 연결
         2. 우측노드의 좌측노드를 루트노드의 우측노드로 연결
         3. 새로운 부모노드로 승격
         4. 트리높이 재계산
            <img src="./asset/RR회전.png" width="400px" />

    3. LR 회전 (이중 회전 - 좌회전 + 우회전)

       - 노드의 왼쪽 서브트리의 오른쪽부분에 새노드가 삽입되어 불균형이 발생한 경우
       - RR회전 후에 LL회전
         <img src="./asset/LR회전1.png" width="400px" />
         <img src="./asset/LR회전2.png" width="400px" />

    4. RL 회전 (이중 회전 - 우회전 + 좌회전)
       - 노드의 오른쪽 서브트리의 왼쪽부분에 새노드가 삽입되어 불균형이 발생한 경우
       - LL회전 후에 RR회전

### #3. RedBlack 트리 (자가균형 이진탐색트리)

- 개념 : 각 노드에 빨간색, 검은색 속성을 부여하여 트리의 균형을 유지하는 자료구조
- 5가지 규칙

  1. 모든 노드는 빨간색 or 검은색
  2. 루트노드는 최종적으로 항상 검은색
  3. 모든 리프노드는 NULL노드이며 검은색
  4. 빨간색노드의 자식은 반드시 검은색
     <img src="./asset/레드블랙위배1.png" width="400px" />
  5. 특정노드에서 리프노드까지 가는 모든 경로에는 같은 개수의 검은색 노드가 있음.
     <img src="./asset/레드블랙위배2.png" width="400px" />

- 특징
  - 트리의 높이가 항상 O(logN)
  - 삽입/삭제/탐색 연산 모두 최악의 경우에도 O(logN)
