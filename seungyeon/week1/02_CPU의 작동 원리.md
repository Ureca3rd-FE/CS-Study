# 중앙처리장치(CPU) 작동 원리

컴퓨터에서 가장 핵심적인 역할을 수행하는 부분. 다음과 같이 구성된다.

### 연산 장치=산술논리연산장치

산술연산, 논리연산 수행.

연산에 필요한 데이터를 register에서 가져오고, 연산 결과를 다시 register로 보낸다.

### 제어 장치

명령어를 순서대로 실행할 수 있도록 하는 장치. 주기억장치에서 프로그램 명령어를 꺼내 해독하고 실행에 필요한 제어 신호를 기억장치, 연산장치, 입출력장치로 보낸다.

이 장치들이 보낸 신호를 받아 다음 동작을 결정하기도 한다.

### 레지스터

고속 기억장치. 명령어 주소, 코드, 연산에 필요한 데이터, 연산 결과 등을 임시로 저장.

용도에 따라 범용 레지스터와 특수목적 레지스터로 구분. (CPU 종류에 따라 사용 가능한 레지스터 개수와 크기가 다름)

- 범용 레지스터: 연산에 필요한 데이터나 연산 결과 임시 저장
- 특수 목적 레지스터: 특별한 용도로 사용하는 레지스터

## 특수 목적 레지스터

- AC 누산기: 연산 결과 임시 저장

- IR 명령어 레지스터: 실행 중인 명령어 저장

- PC 프로그램 카운터: 다음에 수행할 명령어 주소 저장

- MAR 메모리 주소 레지스터: 읽기, 쓰기 연산을 수행할 주기억장치 주소 저장

- MBR 메모리 버퍼 레지스터: 주기억장치에서 읽은/저장할 데이터 임시 저장

## CPU 동작 과정

1. 주기억장치: 데이터, 명령어 읽기

   입력장치에서 입력받은 데이터, 보조기억장치에 저장된 프로그램 읽어옴.

2. CPU: 주기억장치가 읽은 걸 처리하고 다시 저장

   프로그램을 실행하기 위해 주기억장치에 저장된 프로그램 명령어와 데이터를 읽어와 처리. 결과를 다시 주기억장치에 저장.

3. 주기억장치: 처리 결과 저장/출력

   처리 결과를 보조기억장치에 저장하거나 출력장치로 보냄.

4. 제어장치: 1~3과정 제어

   1~3 과정에서 명령어가 순서대로 실행되도록 각 장치를 제어.

### 명령어 세트

CPU가 실행할 명령어 집합.

구성

- 연산 코드: 실행할 연산. 연산, 제어, 데이터 전달, 입출력 기능 가짐.

- 피연산자: 필요한 데이터나 저장 위치. 주소, 숫자/문자. 논리 데이터 등 저장.

CPU는 프로그램 실행을 위해 주기억장치에서 명령어를 순차적으로 인출해 해독하고 실행하는 과정 반복.

CPU가 주기억장치에서 한번에 하나의 명령어를 인출하여 실행하는 데 필요한 일련의 활동을 '명령어 사이클'이라고 함.

명령어 사이클은 인출/실행/간접/인터럽트 사이클로 나뉨.

1. 주기억장치의 지정된 주소에서 하나의 명령어를 가져옴
2. 실행 사이클에서 명령어를 실행함.
3. 실행이 완료되면 그 다음 명령어에 대한 인출 사이클 시작.

#### 인출 사이클과 실행 사이클에 의한 명령어 처리 과정

> 가장 중요한 부분은 PC 값 증가다.

1. PC에 저장된 주소를 MAR로 전달
2. 저장된 내용을 토대로 주기억장치의 해당 주소에서 명령어 인출
3. 인출한 명령어를 MBR에 저장
4. 다음 명령어 인출을 위해 PC값 증가
5. MBR에 저장된 내용을 IR에 전달

```
T0: MAR <- PC
T1: MBR <- M[MAR], PC <- PC+1
T2: IR <- MBR
그림으로 설명하는 게 더 이해가 쉬울듯? 집에서 붙이기
```

#### 인출 후 명령어를 실행하는 과정

```
T0: MAR <- IR(Addr)
T1: MBR <- M[MAR]
T2: AC <- AC+MBR
```

인출은 되었고 명령어를 실행하는 단계라 PC 증가 없음.

IR에 필요한 주소를 MAR에 넣고?? MBR에 해당 주소 값을 가져오도록 함. 그 값과 AC를 더해서 명령 처리.
