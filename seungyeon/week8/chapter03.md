# DB 트랜잭션 Transaction

트랜잭션: 데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위.

상태를 변화시킨다는 것은 SQL문을 통해 DB에 접근하는 것이다. (select, insert, delete, update)

작업 단위: 많은 SQL 명령문을 사람이 정하는 기준에 따라 정하는 것.

```
예시) A가 B에게 만원을 송금한다.

이때 DB 작업
1. A의 계좌에서 만원 차감 > update문을 사용해 A 잔고 변경
2. B의 계좌에 만원 추가 > update문을 사용해 B 잔고 변경

현재 작업 단위: 출금 update+입금 update
- 이를 통틀어 하나의 트랜잭션
- 두 쿼리문이 성공적으로 완료되어야 하나의 작업(트랜잭션)이 완료 =commit
- 작업 단위에 속하는 쿼리 중 하나라도 실패하면 모든 쿼리문 취소, 이전 상태로 복원 =rollback
```

그러니 트랙잭션 설계를 잘 만드는 것이 데이터를 다룰 때 많은 이점을 가져온다.

## 트랜잭션 특징

- 원자성

  트랜잭션이 DB에 모두 반영되거나, 혹은 전혀 반영되지 않아야 한다.

- 일관성

  트랜잭션의 작업 처리 결과는 항상 일관성 있어야 한다.

- 독립성

  둘 이상의 트랜잭션이 동시에 병행 실행되고 있을 때, 어떤 트랜잭션도 다른 트랜잭션 연산에 끼어들 수 없다.

- 지속성
